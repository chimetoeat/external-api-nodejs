<%- include('partials/header') %>

  <div class="container mt-5">
    <div class="d-flex justify-content-between align-items-center">
      <h1>AWESOME</h1>
      
      <form action="/account/logout" method="post">
        <button class="btn btn-danger" type="submit">Logout</button>
      </form>
    </div>

    <p>Welcome, <%= user %>!</p>

    <h1>Territories</h1>
    <ul>
        <% renderNestedList(territories, null); %>
    </ul>
    
    <% function renderNestedList(data, parentId) { %>
        <% const children = data.filter(item => item.parent === parentId); %>
        <% if (children.length > 0) { %>
            <ul>
                <% children.forEach(child => { %>
                    <li>
                        <p>ID: <%= child.id %></p>
                        <p>Name: <%= child.name %></p>
                        <p>Parent: <%= child.parent %></p>
                        <% renderNestedList(data, child.id); %>
                    </li>
                <% }); %>
            </ul>
        <% } %>
    <% } %>
</div>

<%- include('partials/footer') %>
